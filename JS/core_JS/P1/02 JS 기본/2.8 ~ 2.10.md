## 8. 기본 연산자와 수학

#### 단항, 이항, 피연산자

- `피연산자`: 연산자가 연산을 수행하는 대상(인수로 불리기도 한다)
  - 피연산자를 하나만 받는 연산자는 `단항 연산자`라고 부른다. 피연산자의 부호를 뒤집는 마이너스 `-`가 단항 연산자의 대표적인 예시이다.
  - 두 개의 피연산자를 받는 연산자는 `이항 연산자`라고 부른다. 마이너스 역시 이항 연산자로 사용 가능하다. 이 때는 기호는 같지만 수행하는 연산이 다르다. 피연산자의 개수로 구분하게 된다.

```javascript
// calc.html
// 단항 연산자 -
let x = 1;
x = -x
alert(x); // -1 부호를 바꿔준다

// 이항 연산자
let x = 1, y = 3;
alert(y - x); // 2 뺄셈을 해준다
```

#### 수학

- `+`, `-`, `*`, `/` 외에서 `%`, `**` 라는 연산자가 있다.(나머지, 거듭제곱 연산자)
- `%`: 기호로 나타내지만, 퍼센트와는 연관이 없음.
  - `a % b`는 a를 b로 나눈 후 그 나머지를 정수로 반환해준다.

```javascript
// calc.html
alert(5 % 2); // 나머지 1 출력
alert(8 % 3) // 나머지 2 출력
```

- `**`:  `a ** b`를 평가하면 a를 b번 곱한 값이 반환된다. 이는 정수가 아닌 숫자에도 동작한다.

```javascript
// calc.html
alert(2 ** 2) // 4
alert(4 ** (1/2)) // 2(1/2 거듭제곱) 제곱근 구하기
```

#### 이항 연산자 `+`와 문자열 연결

- 이항 연산자 `+`의 피연산자로 문자열이 전달되면 덧셈 연산자는 덧셈이 아닌 문자열을 연결한다.
  - 따라서 이항 연산자 `+`를 사용할 때는 피연산자 중 하나가 문자열이면 다른 하나도 문자열로 변환된다!!
  - 문자열 피연산자가 첫 번째인지 두 번째인지는 중요하지 않다. 하나가 문자열이면 나머지도 문자열로 변환된다.
  - 연산이 왼쪽에서 오른쪽으로 순차적으로 진행되기에 두 개 이상의 숫자 뒤에 문자열이 오는 경우, 숫자가 먼저 더해지고, 그 후 더해진 숫자와 문자열간 병합이 일어난다.
  - 그 외 뺄셈, 나눗셈 연산자가 단지 숫자형의 피연산자만 다루고, 숫자형이 아닌 경우 그 자료형을 숫자형으로 바꾸는 것과는 대조된다.

```javascript
// calc.html
let s = "my" + "string";
alert(s); // mystring

alert('1' + 2); // "12"
alert(2 + '1'); // "21"
alert(2 + 2 + '1'); // "41" -- "221"이 아니다!!

alert(8 - '4'); // 2, '4'를 숫자로 바꾼다
alert('9' / '3'); // 3, 두 피연산자가 숫자로 바뀐 뒤 연산이 진행된다.
```

#### 단항 연산자 `+`와 숫자형으로의 변환

- 단항 연산자로도 사용이 가능하다.
  - 숫자에 단항 덧셈 연산자를 붙이면 아무 동작도 안하지만, 피연산자가 숫자가 아닌 경우 숫자형으로의 변환이 일어난다.

```javascript
// calc.html
let x = 1;
alert(+x); // 1 숫자에는 아무 영향 없음

let y = -2;
alert(+y); // -2

alert(+true); // 1 // 숫자형이 아닌 피연산자는 숫자형으로 변화
alert(+""); // 0
```

- 짧은 문법으로도 `Number(value)`와 동일한 일을 하게 한다.
  - 폼에서 가져오는 값이 문자열 형태일 때, 숫자로 변화시키기 위해 사용하게 된다.
  - 이항 덧셈 연산자를 사용하면 값이 문자열로 변해서 연결될 것이다.
  - 원하는대로 값을 더해주기 위해 단항 덧셈 연산자로 피연산자를 숫자형으로 변환할 수 있다.

```javascript
// calc.html
let apple = "2";
let lemon = "3";
alert(apple + lemon); // 23 이항 덧셈 연산자는 문자열을 연결함
alert(+apple + +lemon); // 5 이항 덧셈 연산자가 적용되기 전 피연산자들이 숫자형으로 변화했다!
alert(Number(apple) + Number(lemon)); // 같은 동작을 하지만 더 긴 코드
```

#### 연산자 우선순위

- 하나의 표현식에 둘 이상의 연산자가 있는 경우, 실행 순위가 우선순위에 의해 결정된다.
  - 정의된 우선순위가 마음에 들지 않는 경우 괄호를 사용해 기존의 우선순위를 무력화시키고 본인이 우선시하는 연산을 먼저 수행하게 할 수도 있다.
  - 연산자들의 우선 순위는 https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence를 참고
  - 동일한 기호의 단항 연산자는 이항 연산자보다 우선순위가 더 높다

#### 할당 연산자

- 할당 연산자 `=`는 값을 반환한다.
  - `x = value`를 호출하면 value가 x에 쓰여지고 value가 반환된다.
  - `(a = b + 1)`은 a에 값을 할당하고, 그 값인 3을 반환한다. 반환값은 이어지는 표현식에도 사용된다.
  - 할당 연산자로 여러 개를 연결할수도 있다.(체이닝)
  - 할당 연산자를 여러 개 연결한 경우, 평가는 우측부터 진행된다. 우측에 있을 표현식이 평가되고, 그 결과가 좌측의 피연산자들에 순차적으로 할당된다. 결국 모든 피연산자(변수)가 단일 값을 공유하게 된다.
  - 물론 이렇게 하는 것보다 그냥 줄을 나눠서 하나씩 할당하는게 더 보기가 좋다.

```javascript
// calc.html
let x = 2 * 2 + 1;
alert(x) // 5

let a = 1;
let b = 2;
let c = 3 - (a = b + 1);

alert(a); // 3
alert(c); // 0

let a, b, c;
a = b = c = 2 + 2;
alert(a); // 4
alert(b); // 4
alert(c); // 4

c = 2 + 2;
b = c;
a = c;
```

#### 복합 할당 연산자

- 변수에 연산자를 적용하고 그 결과를 같은 변수에 저장해야 하는 경우 복합 할당 연산자 `+=` 또는 `*=`로 동일한 연산을 수행할 수 있다. 
  - 산술 연산자, 비트 연산자에도 적용 가능하다. 할당 연산자와 동일한 우선순위를 가진다.
  - 대부분 다른 연산자들이 실행된 뒤에 복합 할당 연산자가 실행된다.

```javascript
// calc.html
let n = 2;
n = n + 5;
n = n * 2;

let n = 2;
n += 5 // 2 + 5
n *= 2 // (2 + 5) * 2
alert(n) // 14

let n = 2;
n *= 3 + 5;
alert(n); // 16 *=의 우측이 먼저 평가된다(우선순위)
```

#### 증가/감소 연산자

- 숫자를 늘리거나, 줄이는 연산
  - 변수의 앞이나 뒤에만 쓸 수 있다! 값에 쓰려고 하는 경우 오류가 난다.
  - 피연산자 뒤에 오면 후위형, 앞에 오면 전위형이 된다.
  - 전위형은 증감 후의 새로운 값을 반환하는 반면, 후위형은 기존 값을 반환하고 연산 뒤 증감을 한다.
  - 반환 값을 사용하지 않는 경우, 전위형이나 후위형에 차이가 없다.
  - 값을 먼저 변화시킨 후 바로 사용시키려면 전위형을 사용한다.
  - 값을 변화시킬거지만 증감 전의 기존값을 사용하려면 후위형을 사용한다.
  - 표현식 중간에 사용할수도 있다. 증감 연산자는 대체로 대부분의 산술연산자보다 순위가 높기 때문에, 연산이 먼저 이루어진다.

```javascript
// calc.html
let counter = 2;
counter++; // + 1과 동일
alert(counter); // 3

let counter = 2;
counter--; // - 1과 동일
alert(counter); // 1

let counter = 1;
let a = counter++; 
alert(a); // 1!  만약 ++counter였다면 2가 반환될 것. counter++는 증가는 시키지만 증가 전의 기존 값을 반환

let counter = 0;
alert(++counter); // 값을 우선 증가시키고 그 값을 바로 사용하려면 전위형으로 사용해야 한다.

let counter = 1;
alert(2 * ++counter); // 4 먼저 카운터가 늘어나 2가 된 후 2 * 2 -> 4가 된다. 후위형이었다면 2가 나올 것
```

#### 비트 연산자

- 비트 연산자는 인수를 32비트 정수로 변환해 이전 연산을 수행한다.
  - AND(`&`), OR(`|`), XOR(`^`), NOT(`~`), LEFT SHIFT(`<<`), RIGHT SHIFT(`>>`)
  - 부호없는 오른쪽 시프트(`>>>`) 과 같은 연산자들이 있다.

#### 쉼표 연산자

- `,`는 좀처럼 보기 힘들고, 특이한 연산자이다. 코드를 짧게 쓰려는 의도로 사용되곤 한다.
  - 여러 표현식을 한 줄에서 평가할 수 있게 해주는데, 마지막 표현식의 결과만 반환된다는 것에 주의하자.
  - 우선순위가 매우 낮다! 그렇기에 괄호가 중요한 역할을 한다.

```javascript
// calc.html
let a = (1 + 2, 3 + 4);
alert(a); // 7 (3 + 4)
```

## 9. 비교 연산자